<h1 id="4-栈和队列"><a href="#4-栈和队列" class="headerlink" title="4.栈和队列"></a>4.栈和队列</h1><h4 id="1-求滑动窗口内最大值"><a href="#1-求滑动窗口内最大值" class="headerlink" title="1.求滑动窗口内最大值"></a>1.求滑动窗口内最大值</h4><p>一个数组，设置一个滑动窗口从左往右滑动，求出滑动过程中，滑动窗口中的最大值。</p>
<p>例如：数组{2，3，1，5，6，3，8}，滑动窗口的大小是3，则滑动过程中的每个滑动窗口最大值分别是：</p>
<ul>
<li>{2，3，1} 最大值是3；</li>
<li>{3，1，5}最大值是5；</li>
<li>{1，5，6}最大值是6；</li>
<li>{5，6，3}最大值是6；</li>
<li>{6，3，8}最大值是8；</li>
</ul>
<p>所以滑动过程中最大值是{3，5，6，6，8}</p>
<p>思路：定义一个双向队列qmax，然后遍历数组，遍历过程中数组下标为i，</p>
<p>如果qmax为空，直接将i加入队列中，否则获取队列中最后一个元素j，</p>
<p>如果arr[j]>arr[i]，则直接将元素i加入队列中，</p>
<p>否则一直从队列移除末尾元素，直到arr[j]&lt;=arr[i]或者数组为空时，将元素i加入队列中，即保证队列中的存储的下标所对应数组元素是递减的。</p>
<p>每次遍历的是时候判断，是否已经达到滑动窗口的大小，达到则进一步判断队列头的下标是否在滑动窗口内，如果不在，则移除队列头，此时将队列头加入最大值列表中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.LinkedList;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * </div><div class="line"> * <span class="doctag">@author</span> huzhiming 求数组中每个滑动窗口中的最大值</div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaxNumInSlideArr</span></span></div><div class="line">&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span>[] arr = &#123; <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">1</span> &#125;;</div><div class="line">		findMaxNumInSlideArr(arr, <span class="number">3</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">findMaxNumInSlideArr</span><span class="params">(<span class="keyword">int</span>[] num, <span class="keyword">int</span> size)</span></span></div><div class="line">	&#123;</div><div class="line">		LinkedList&lt;Integer&gt; qmax = <span class="keyword">new</span> LinkedList&lt;&gt;();</div><div class="line">		ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">		<span class="keyword">if</span> (size == <span class="number">0</span>)</div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num.length; i++)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (qmax.isEmpty())</div><div class="line">				qmax.add(i);</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				<span class="comment">// 找到队列中第一个大于当前值得元素</span></div><div class="line">				<span class="keyword">while</span> (!qmax.isEmpty() &amp;&amp; num[qmax.getLast()] &lt;= num[i])</div><div class="line">					qmax.removeLast();</div><div class="line">				qmax.add(i);</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> (i &gt;= size - <span class="number">1</span>)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">int</span> head = qmax.getFirst();</div><div class="line">              	<span class="comment">//判断下标是否在滑动窗口内</span></div><div class="line">				<span class="keyword">if</span> (i - head &gt; size - <span class="number">1</span>)</div><div class="line">					qmax.removeFirst();</div><div class="line">				head = qmax.getFirst();</div><div class="line">				res.add(num[head]);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		System.out.println(res);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>