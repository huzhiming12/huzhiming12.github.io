<h1 id="求数组中最长递增子序列"><a href="#求数组中最长递增子序列" class="headerlink" title="求数组中最长递增子序列"></a>求数组中最长递增子序列</h1><h4 id="求数组中最长递增子序列长度"><a href="#求数组中最长递增子序列长度" class="headerlink" title="求数组中最长递增子序列长度"></a>求数组中最长递增子序列长度</h4><blockquote>
<p>题目：求数组中最长的递增子序列。如组数arr{3，2，5，4，7，8，1，9}，这个数组中最长递增子序列是{2，4，7，8，9}，它的长度是5。</p>
</blockquote>
<h5 id="解法一：算法复杂度O-N-2"><a href="#解法一：算法复杂度O-N-2" class="headerlink" title="解法一：算法复杂度O(N^2^)"></a>解法一：算法复杂度O(N^2^)</h5><p>定义一个数组记录h，h[i]记录以数组arr[i]结尾的最长子序列。</p>
<p>arr：{3，2，5，4，7，8，1，9}</p>
<p>   h：{1}  元素3</p>
<p>   h：{1，1} 元素2</p>
<p>   h：{1，1，2} 元素5</p>
<p>   h：{1，1，2，2} 元素4</p>
<p>   h：{1，1，2，2，3} 元素7</p>
<p>   h：{1，1，2，2，3，4} 元素8</p>
<p>   h：{1，1，2，2，3，4，1} 元素1</p>
<p>   h：{1，1，2，2，3，4，1，5} 元素9</p>
<p>求以arr[i]结尾的最长子序列长度，从h数组中第i-1位置往前找到值小于arr[i]但是h[j]最大的值。最后从h中找到最大值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxArr</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="keyword">int</span>[] arr = &#123; <span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">10</span> &#125;;</div><div class="line">	<span class="keyword">int</span>[] h = <span class="keyword">new</span> <span class="keyword">int</span>[arr.length];</div><div class="line">	h[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">int</span> max = <span class="number">0</span>;</div><div class="line">         	<span class="comment">//从第i-1为开始查找小于arr[i]的最大h值</span></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = i - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (arr[i] &gt; arr[j] &amp;&amp; max &lt; h[j])</div><div class="line">				max = h[j];</div><div class="line">		&#125;</div><div class="line">		h[i] = max + <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">     	<span class="comment">//求h中的最大值</span></div><div class="line">	<span class="keyword">int</span> max = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; h.length; i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (max &lt; h[i])</div><div class="line">			max = h[i];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> max;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="解法二：复杂度O-NlogN"><a href="#解法二：复杂度O-NlogN" class="headerlink" title="解法二：复杂度O(NlogN)"></a>解法二：复杂度O(NlogN)</h5><p>同样定义一个数组ends,end[0]——end[i] 表示以end[i]结尾的最长子序列</p>
<p>arr:        {3，2，5，4，7，8，1，9}</p>
<p>ends:    {3} 3</p>
<p>ends:    {2} 2      如果ends中最后一个元素值大于arr[i],则在ends找到第一个大于arr[i]的元素将其替换</p>
<p>ends:    {2,5} 5   如果ends中最后一个元素值小于arr[i],则在ends数组后面直接添加新元素</p>
<p>ends:    {2,4} 4</p>
<p>ends:    {2,4,7} 7</p>
<p>ends:    {2,4,7,8} 8</p>
<p>ends:    {1,4,7,8} 1</p>
<p>ends:    {1,4,7,8,9} 9</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxArr1</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span></div><div class="line">&#123;</div><div class="line"></div><div class="line">	<span class="keyword">int</span>[] ends = <span class="keyword">new</span> <span class="keyword">int</span>[arr.length];</div><div class="line">	ends[<span class="number">0</span>] = arr[<span class="number">0</span>];</div><div class="line">	<span class="keyword">int</span> max = <span class="number">1</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++)</div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (ends[max - <span class="number">1</span>] &lt; arr[i])</div><div class="line">		&#123;</div><div class="line">			ends[max] = arr[i];</div><div class="line">			max++;</div><div class="line">		&#125; <span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">int</span> low = <span class="number">0</span>;</div><div class="line">			<span class="keyword">int</span> high = max - <span class="number">1</span>;</div><div class="line">			<span class="keyword">int</span> pos = high;</div><div class="line">			<span class="keyword">while</span> (low &lt;= high)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">int</span> middle = low + (high - low) / <span class="number">2</span>;</div><div class="line">				<span class="keyword">if</span> (ends[middle] &gt; arr[i])</div><div class="line">				&#123;</div><div class="line">					high = middle-<span class="number">1</span>;</div><div class="line">					pos = middle;</div><div class="line">				&#125; <span class="keyword">else</span></div><div class="line">					low = middle + <span class="number">1</span>;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			ends[pos] = arr[i];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> max;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="求点数组中最长子序列"><a href="#求点数组中最长子序列" class="headerlink" title="求点数组中最长子序列"></a>求点数组中最长子序列</h4><blockquote>
<p>给定一个 N*2 的二维数组，看作是一个个二元组，例如[[a1,b1],[a2,b2],[a3,b3]]，规定:一个如果想把二元组甲放在二元组乙上，甲中的 a 值必须大于乙中的 a 值，甲中的 b</p>
<p>值必须大于乙中的 b 值。如果在二维数组中随意选择二元组，请问二元组最多可以往上摞几个?</p>
<p>例如:[[5,4],[6,4],[6,7],[2,3]], 最大数量可以摞 3 个，[2,3] =&gt; [5,4] =&gt; [6,7]要求:实现时间复杂度 O(N*logN)的解法</p>
</blockquote>
<p>思路：将二维数组按a值升序排列，当a相等的时候，再按b值降序排列。之后将二维数组中的b值提取出来，按一维数组求最长子序列的解法进行求解。</p>
<p><em>注意：</em> a相等时按b值降序排列是为了解决a值相等的冲突。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">maxPoint</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	Point[] points = &#123; <span class="keyword">new</span> Point(<span class="number">3</span>, <span class="number">6</span>), <span class="keyword">new</span> Point(<span class="number">3</span>, <span class="number">5</span>), <span class="keyword">new</span> Point(<span class="number">3</span>, <span class="number">9</span>), </div><div class="line">					   <span class="keyword">new</span> Point(<span class="number">2</span>, <span class="number">8</span>), <span class="keyword">new</span> Point(<span class="number">4</span>, <span class="number">2</span>),<span class="keyword">new</span> Point(<span class="number">6</span>, <span class="number">10</span>), </div><div class="line">					   <span class="keyword">new</span> Point(<span class="number">5</span>, <span class="number">6</span>), <span class="keyword">new</span> Point(<span class="number">9</span>, <span class="number">12</span>), <span class="keyword">new</span> Point(<span class="number">8</span>, <span class="number">2</span>),</div><div class="line">                          <span class="keyword">new</span> Point(<span class="number">10</span>, <span class="number">8</span>) &#125;;</div><div class="line">	Arrays.sort(points, <span class="keyword">new</span> PointComparator());</div><div class="line">	<span class="keyword">int</span> arr[] = <span class="keyword">new</span> <span class="keyword">int</span>[points.length];</div><div class="line">	<span class="comment">//System.out.println(Arrays.toString(points));</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; points.length; i++)</div><div class="line">	&#123;</div><div class="line">		arr[i] = points[i].y;</div><div class="line">	&#125;</div><div class="line">     	<span class="comment">//调用上面介绍的一维数组求最长子序列函数</span></div><div class="line">	System.out.println(maxArr1(arr));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//对象比较接口</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PointComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Point</span>&gt;</span></div><div class="line">&#123;</div><div class="line">     	<span class="comment">//按x大小排序，x相等时，按y值降序排列</span></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Point o1, Point o2)</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">if</span> (o1.x &gt; o2.x)</div><div class="line">			<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (o1.x == o2.x)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">if</span> (o1.y &lt;= o2.y)</div><div class="line">				<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">			<span class="keyword">else</span></div><div class="line">				<span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">		&#125; <span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>