<h1 id="Effective-Java-阅读笔记"><a href="#Effective-Java-阅读笔记" class="headerlink" title="Effective Java 阅读笔记"></a>Effective Java 阅读笔记</h1><h4 id="第一条：用静态工厂方法代替构造器"><a href="#第一条：用静态工厂方法代替构造器" class="headerlink" title="第一条：用静态工厂方法代替构造器"></a>第一条：用静态工厂方法代替构造器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Book <span class="title">getNewInstance</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">  	<span class="keyword">return</span> <span class="keyword">new</span> Book();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="第二条：遇到多个构造器参数时要考虑用构造器"><a href="#第二条：遇到多个构造器参数时要考虑用构造器" class="headerlink" title="第二条：遇到多个构造器参数时要考虑用构造器"></a>第二条：遇到多个构造器参数时要考虑用构造器</h4><p><img src="/2016/11/20/java/note/Effective Java 阅读笔记/effective-001.png" alt="001"></p>
<p><img src="/2016/11/20/java/note/Effective Java 阅读笔记/effective-002.png" alt="002"></p>
<p>调用方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NutritionFacts cocaCola = <span class="keyword">new</span> NutritionFacts.Builder(<span class="number">240</span>,<span class="number">8</span>).calories(<span class="number">100</span>).sodium(<span class="number">35</span>).carbohydrate(<span class="number">27</span>).build();</div></pre></td></tr></table></figure>
<h4 id="第三条：用私有构造器或者枚举类型强化singleton属性"><a href="#第三条：用私有构造器或者枚举类型强化singleton属性" class="headerlink" title="第三条：用私有构造器或者枚举类型强化singleton属性"></a>第三条：用私有构造器或者枚举类型强化singleton属性</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elvis</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Elvis INSTANCE = <span class="keyword">new</span> Elvis();</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Elivs</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>保证了Elvis对象的唯一性，一旦被实力化只能存在一个Elvis对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elvis</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Elvis INSTANCE = <span class="keyword">new</span> Elvis();</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Elivs</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Elvis <span class="title">getInstance</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      <span class="keyword">return</span> INSTANCE;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="第四条：通过私有构造器强化不可实例化的能力"><a href="#第四条：通过私有构造器强化不可实例化的能力" class="headerlink" title="第四条：通过私有构造器强化不可实例化的能力"></a>第四条：通过私有构造器强化不可实例化的能力</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UtiltyClass</span></span></div><div class="line">&#123;</div><div class="line">  	<span class="function"><span class="keyword">private</span> <span class="title">UtiltyClass</span><span class="params">()</span></span>&#123;&#125;</div><div class="line">  	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">methods</span><span class="params">()</span></span>&#123;……&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>工具类一般不能实例化，所以将构造器私有化，防止 用户实例化工具类。</p>
<h4 id="第五条：避免创建不必要的对象"><a href="#第五条：避免创建不必要的对象" class="headerlink" title="第五条：避免创建不必要的对象"></a>第五条：避免创建不必要的对象</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String s = <span class="keyword">new</span> String(<span class="string">"i am a boy!"</span>);</div></pre></td></tr></table></figure>
<p>“i am a boy!”本身就是一个String对象，这相当于创建了两个String对象。尤其注意基本类型的自动装箱和拆箱功能。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*错误做法</span></div><div class="line">Long num = 10000L;  </div><div class="line">*/</div><div class="line"><span class="keyword">long</span> num = <span class="number">1000L</span>;</div></pre></td></tr></table></figure>
<h4 id="第六条：消除过期对象的引用"><a href="#第六条：消除过期对象的引用" class="headerlink" title="第六条：消除过期对象的引用"></a>第六条：消除过期对象的引用</h4><ul>
<li>stack 弹出数据之后及时置空。</li>
<li>一但元素被释放，则该元素包含的任何对象引用都应该被清空。</li>
</ul>
<h4 id="第七条：避免使用终结方法"><a href="#第七条：避免使用终结方法" class="headerlink" title="第七条：避免使用终结方法"></a>第七条：避免使用终结方法</h4><h4 id="第八条：覆盖equals时请遵守通用的约定"><a href="#第八条：覆盖equals时请遵守通用的约定" class="headerlink" title="第八条：覆盖equals时请遵守通用的约定"></a>第八条：覆盖equals时请遵守通用的约定</h4><ul>
<li>自反性：对于任何非null得引用值x,x.equals(x)必须返回true</li>
<li>对称性：对于任何非null的引用值x和y，当且仅当y.equals(x)返回true时，x.equals(y)必须返回true</li>
<li>传递性：x.equals(y)=true   y.equals(z)=true   ——&gt; x.equals(z)=true</li>
<li>一致性：对于任何非null的引用值x和y，只要equals的比较操作在对象中所用的信息没有被修改，多次调用x.equals(y)必须始终返回true或false。</li>
</ul>
<h4 id="第九条：覆盖equals时总要覆盖hashCode"><a href="#第九条：覆盖equals时总要覆盖hashCode" class="headerlink" title="第九条：覆盖equals时总要覆盖hashCode"></a>第九条：覆盖equals时总要覆盖hashCode</h4><p>​    每个覆盖了equals方法的类中，也必须覆盖hashCode方法。如果不这样做的话就会违反Object，hashCode的通用约定。</p>
<p>​    约定内容如下：</p>
<p><img src="/2016/11/20/java/note/Effective Java 阅读笔记/effective-003.png" alt="003"></p>
<p>​    hashCode计算应该把每个equals比较的域都考虑进去，但是如果一个域值可以根据另一个域值推到出来则可以将其中一个域值排除。</p>
<p>​    其中一种计算方法如下：</p>
<p><img src="/2016/11/20/java/note/Effective Java 阅读笔记/effective-004.png" alt="004"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">  	<span class="keyword">int</span> result =<span class="number">17</span>;</div><div class="line">  	result = <span class="number">31</span>*result + areaCode;</div><div class="line">  	result = <span class="number">31</span>*result + prefix;</div><div class="line">  	result = <span class="number">31</span>*result + lineNumber;</div><div class="line">  	<span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="第十条：始终要覆盖toString方法"><a href="#第十条：始终要覆盖toString方法" class="headerlink" title="第十条：始终要覆盖toString方法"></a>第十条：始终要覆盖toString方法</h4><h4 id="第十一条：谨慎的覆盖clone方法"><a href="#第十一条：谨慎的覆盖clone方法" class="headerlink" title="第十一条：谨慎的覆盖clone方法"></a>第十一条：谨慎的覆盖clone方法</h4>